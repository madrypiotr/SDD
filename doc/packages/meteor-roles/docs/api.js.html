<!DOCTYPE html>
<html>
<head>
  <title>api.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "packages\\meteor-roles\\docs\\api.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

  <script src="../../../fileSearch.js"></script>

  <link rel="stylesheet" href="../../../fileSearch.css" />

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>api.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">YUI.add(<span class="hljs-string">"yuidoc-meta"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Y</span>) </span>{
   Y.YUIDoc = { <span class="hljs-attr">meta</span>: {
    <span class="hljs-string">"classes"</span>: [
        <span class="hljs-string">"Roles"</span>,
        <span class="hljs-string">"Roles                                                                                                    // 22"</span>,
        <span class="hljs-string">"Roles                                                                                            // 22"</span>,
        <span class="hljs-string">"UIHelpers"</span>,
        <span class="hljs-string">"UIHelpers                                                                                                // 42\n/                                                                                                              // 43\n isInRole: function (role, group) {                                                                               // 44\n   var user = Meteor.user(),                                                                                      // 45\n       comma = (role || '').indexOf(','),                                                                         // 46\n       roles                                                                                                      // 47\n                                                                                                                  // 48\n   if (!user) return false                                                                                        // 49\n   if (!Match.test(role, String)) return false                                                                    // 50\n                                                                                                                  // 51\n   if (comma !== -1) {                                                                                            // 52\n     roles = _.reduce(role.split(','), function (memo, r) {                                                       // 53\n       if (!r || !r.trim()) {                                                                                     // 54\n         return memo                                                                                              // 55\n       }                                                                                                          // 56\n       memo.push(r.trim())                                                                                        // 57\n       return memo                                                                                                // 58\n     }, [])                                                                                                       // 59\n   } else {                                                                                                       // 60\n     roles = [role]                                                                                               // 61\n   }                                                                                                              // 62\n                                                                                                                  // 63\n   if (Match.test(group, String)) {                                                                               // 64\n     return Roles.userIsInRole(user, roles, group)                                                                // 65\n   }                                                                                                              // 66\n                                                                                                                  // 67\n   return Roles.userIsInRole(user, roles)                                                                         // 68\n }                                                                                                                // 69\n}                                                                                                                  // 70\n                                                                                                                  // 71\nif (Package.ui) {                                                                                                  // 72\n _.each(Roles._uiHelpers, function (func, name) {                                                                 // 73\n   Package.ui.UI.registerHelper(name, func)                                                                       // 74\n })                                                                                                               // 75\n} else if (Package.handlebars) {                                                                                   // 76\n _.each(Roles._uiHelpers, function (func, name) {                                                                 // 77\n   Package.handlebars.Handlebars.registerHelper(name, func)                                                       // 78\n })                                                                                                               // 79\n} else {                                                                                                           // 80\n console.log &amp;&amp; console.log('WARNING: Roles template helpers not registered. Handlebars or UI package not found') // 81\n}                                                                                                                  // 82\n                                                                                                                  // 83\n}());                                                                                                              // 84\n                                                                                                                  // 85\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);"</span>
    ],
    <span class="hljs-string">"modules"</span>: [
        <span class="hljs-string">"Roles"</span>,
        <span class="hljs-string">"Roles                                                                                                   __ 6\n_                                                                                                                __ 7\n                                                                                                                  __ 8\n_**                                                                                                                __ 9\nRoles collection documents consist only of an id and a role name.                                               __ 10\n  ex: { _id:&lt;uuid&gt;, name: \"admin\" }                                                                             __ 11\n_                                                                                                                __ 12\nif (!Meteor.roles) {                                                                                               __ 13\n Meteor.roles = new Meteor.Collection(\"roles\")                                                                    __ 14\n}                                                                                                                  __ 15\n                                                                                                                  __ 16\n_**                                                                                                                __ 17\nRole-based authorization compatible with built-in Meteor accounts package.                                      __ 18\n                                                                                                                __ 19\nStores user's current roles in a 'roles' field on the user object.                                              __ 20\n                                                                                                                __ 21"</span>,
        <span class="hljs-string">"Roles                                                                                           __ 6\n_                                                                                                        __ 7\n                                                                                                          __ 8\n_**                                                                                                        __ 9\nRoles collection documents consist only of an id and a role name.                                       __ 10\n  ex: { _id:&lt;uuid&gt;, name: \"admin\" }                                                                     __ 11\n_                                                                                                        __ 12\nif (!Meteor.roles) {                                                                                       __ 13\n Meteor.roles = new Meteor.Collection(\"roles\")                                                            __ 14\n}                                                                                                          __ 15\n                                                                                                          __ 16\n_**                                                                                                        __ 17\nRole-based authorization compatible with built-in Meteor accounts package.                              __ 18\n                                                                                                        __ 19\nStores user's current roles in a 'roles' field on the user object.                                      __ 20\n                                                                                                        __ 21"</span>,
        <span class="hljs-string">"UIHelpers"</span>,
        <span class="hljs-string">"UIHelpers                                                                                               __ 10\n_                                                                                                                __ 11\n                                                                                                                  __ 12\n____________________________________________________________                                                       __ 13\n__ UI helpers                                                                                                      __ 14\n__                                                                                                                 __ 15\n__ Use a semi-private variable rather than declaring UI                                                            __ 16\n__ helpers directly so that we can unit test the helpers.                                                          __ 17\n__ XXX For some reason, the UI helpers are not registered                                                          __ 18\n__ before the tests run.                                                                                           __ 19\n__                                                                                                                 __ 20\nRoles._uiHelpers = {                                                                                               __ 21\n                                                                                                                  __ 22\n _**                                                                                                              __ 23\nUI helper to check if current user is in at least one                                                         __ 24\nof the target roles.  For use in client-side templates.                                                       __ 25\n                                                                                                              __ 26"</span>
    ],
    <span class="hljs-string">"allModules"</span>: [
        {
            <span class="hljs-string">"displayName"</span>: <span class="hljs-string">"Roles"</span>,
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"Roles"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"Provides functions related to user authorization. Compatible with built-in Meteor accounts packages."</span>
        },
        {
            <span class="hljs-string">"displayName"</span>: <span class="hljs-string">"Roles                                                                                                   // 6\n/                                                                                                                // 7\n                                                                                                                  // 8\n/**                                                                                                                // 9\nRoles collection documents consist only of an id and a role name.                                               // 10\n  ex: { _id:&lt;uuid&gt;, name: \"admin\" }                                                                             // 11\n/                                                                                                                // 12\nif (!Meteor.roles) {                                                                                               // 13\n Meteor.roles = new Meteor.Collection(\"roles\")                                                                    // 14\n}                                                                                                                  // 15\n                                                                                                                  // 16\n/**                                                                                                                // 17\nRole-based authorization compatible with built-in Meteor accounts package.                                      // 18\n                                                                                                                // 19\nStores user's current roles in a 'roles' field on the user object.                                              // 20\n                                                                                                                // 21"</span>,
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"Roles                                                                                                   __ 6\n_                                                                                                                __ 7\n                                                                                                                  __ 8\n_**                                                                                                                __ 9\nRoles collection documents consist only of an id and a role name.                                               __ 10\n  ex: { _id:&lt;uuid&gt;, name: \"admin\" }                                                                             __ 11\n_                                                                                                                __ 12\nif (!Meteor.roles) {                                                                                               __ 13\n Meteor.roles = new Meteor.Collection(\"roles\")                                                                    __ 14\n}                                                                                                                  __ 15\n                                                                                                                  __ 16\n_**                                                                                                                __ 17\nRole-based authorization compatible with built-in Meteor accounts package.                                      __ 18\n                                                                                                                __ 19\nStores user's current roles in a 'roles' field on the user object.                                              __ 20\n                                                                                                                __ 21"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"Provides functions related to user authorization. Compatible with built-in Meteor accounts packages.            // 4\n                                                                                                                // 5"</span>
        },
        {
            <span class="hljs-string">"displayName"</span>: <span class="hljs-string">"Roles                                                                                           // 6\n/                                                                                                        // 7\n                                                                                                          // 8\n/**                                                                                                        // 9\nRoles collection documents consist only of an id and a role name.                                       // 10\n  ex: { _id:&lt;uuid&gt;, name: \"admin\" }                                                                     // 11\n/                                                                                                        // 12\nif (!Meteor.roles) {                                                                                       // 13\n Meteor.roles = new Meteor.Collection(\"roles\")                                                            // 14\n}                                                                                                          // 15\n                                                                                                          // 16\n/**                                                                                                        // 17\nRole-based authorization compatible with built-in Meteor accounts package.                              // 18\n                                                                                                        // 19\nStores user's current roles in a 'roles' field on the user object.                                      // 20\n                                                                                                        // 21"</span>,
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"Roles                                                                                           __ 6\n_                                                                                                        __ 7\n                                                                                                          __ 8\n_**                                                                                                        __ 9\nRoles collection documents consist only of an id and a role name.                                       __ 10\n  ex: { _id:&lt;uuid&gt;, name: \"admin\" }                                                                     __ 11\n_                                                                                                        __ 12\nif (!Meteor.roles) {                                                                                       __ 13\n Meteor.roles = new Meteor.Collection(\"roles\")                                                            __ 14\n}                                                                                                          __ 15\n                                                                                                          __ 16\n_**                                                                                                        __ 17\nRole-based authorization compatible with built-in Meteor accounts package.                              __ 18\n                                                                                                        __ 19\nStores user's current roles in a 'roles' field on the user object.                                      __ 20\n                                                                                                        __ 21"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"Roles collection documents consist only of an id and a role name.                                       // 5\n  ex: { _id:&lt;uuid&gt;, name: \"admin\" }                                                                     // 6\n/                                                                                                        // 7\nif (!Meteor.roles) {                                                                                       // 8\n Meteor.roles = new Meteor.Collection(\"roles\")                                                            // 9\n                                                                                                          // 10\n // Create default indexes for roles collection                                                           // 11\n Meteor.roles._ensureIndex('name', {unique: 1})                                                           // 12\n}                                                                                                          // 13\n                                                                                                          // 14\n                                                                                                          // 15\n/**                                                                                                        // 16\nAlways publish logged-in user's roles so client-side                                                    // 17\nchecks can work.                                                                                        // 18\n/                                                                                                        // 19\nMeteor.publish(null, function () {                                                                         // 20\n var userId = this.userId,                                                                                // 21\n     fields = {roles:1}                                                                                   // 22\n                                                                                                          // 23\n return Meteor.users.find({_id:userId}, {fields: fields})                                                 // 24\n})                                                                                                         // 25\n                                                                                                          // 26\n}());                                                                                                      // 27\n                                                                                                          // 28\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// packages/alanning:roles/roles_common.js                                                                 //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                          //\n;(function () {                                                                                            // 1\n                                                                                                          // 2\n/**                                                                                                        // 3\nProvides functions related to user authorization. Compatible with built-in Meteor accounts packages.    // 4\n                                                                                                        // 5"</span>
        },
        {
            <span class="hljs-string">"displayName"</span>: <span class="hljs-string">"UIHelpers"</span>,
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"UIHelpers"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"Convenience functions for use on client.\n\nNOTE: You must restrict user actions on the server-side; any\nclient-side checks are strictly for convenience and must not be\ntrusted."</span>
        },
        {
            <span class="hljs-string">"displayName"</span>: <span class="hljs-string">"UIHelpers                                                                                               // 10\n/                                                                                                                // 11\n                                                                                                                  // 12\n////////////////////////////////////////////////////////////                                                       // 13\n// UI helpers                                                                                                      // 14\n//                                                                                                                 // 15\n// Use a semi-private variable rather than declaring UI                                                            // 16\n// helpers directly so that we can unit test the helpers.                                                          // 17\n// XXX For some reason, the UI helpers are not registered                                                          // 18\n// before the tests run.                                                                                           // 19\n//                                                                                                                 // 20\nRoles._uiHelpers = {                                                                                               // 21\n                                                                                                                  // 22\n /**                                                                                                              // 23\nUI helper to check if current user is in at least one                                                         // 24\nof the target roles.  For use in client-side templates.                                                       // 25\n                                                                                                              // 26"</span>,
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"UIHelpers                                                                                               __ 10\n_                                                                                                                __ 11\n                                                                                                                  __ 12\n____________________________________________________________                                                       __ 13\n__ UI helpers                                                                                                      __ 14\n__                                                                                                                 __ 15\n__ Use a semi-private variable rather than declaring UI                                                            __ 16\n__ helpers directly so that we can unit test the helpers.                                                          __ 17\n__ XXX For some reason, the UI helpers are not registered                                                          __ 18\n__ before the tests run.                                                                                           __ 19\n__                                                                                                                 __ 20\nRoles._uiHelpers = {                                                                                               __ 21\n                                                                                                                  __ 22\n _**                                                                                                              __ 23\nUI helper to check if current user is in at least one                                                         __ 24\nof the target roles.  For use in client-side templates.                                                       __ 25\n                                                                                                              __ 26"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"Provides functions related to user authorization. Compatible with built-in Meteor accounts packages.            // 4\n                                                                                                                // 5"</span>
        }
    ]
} };
});
</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
